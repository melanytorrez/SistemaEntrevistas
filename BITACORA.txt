BITACORA DE DESARROLLO - SISTEMA DE ANALISIS DE ENTREVISTAS

======================================================================
DIA 0: PREPARACION Y DATOS
Fecha: 14/12/2025
======================================================================

1. GENERACION DE DATASET
   - Actividad: Grabacion de 3 videos de validacion (30-60 segundos).
   - Escenarios cubiertos:
     a) Video 1(49): Cambio emocional brusco (Positivo a Negativo).
     b) Video 2(14): Incongruencia (Expresion facial vs. Contenido del texto).
     c) Video 3(12): Linea base neutral (Lectura tecnica).
   - Ground Truth: Creacion del archivo 'validacion_dataset.xlsx' con etiquetado manual de emociones y tiempos para calculo posterior de precision.

2. PREPARACION DEL ENTORNO
   - Estructura de directorios creada (/data, /src, /models, /output).
   - Instalacion de dependencias base: OpenCV, DeepFace, Whisper, Torch, Transformers.

======================================================================
DIA 1: CONFIGURACION, PROTOTIPADO Y DISEÑO
Fecha: 15/12/2025
ESTADO: COMPLETADO
======================================================================

1. RESOLUCION DE INCIDENCIAS TECNICAS
   - Incidencia: Conflicto de dependencias entre TensorFlow 2.x y Keras.
     Solucion: Instalacion de paquete 'tf-keras' para compatibilidad con RetinaFace.
   - Incidencia: Whisper fallaba por ausencia de binarios de FFmpeg en Windows.
     Solucion: Instalacion via Winget y actualizacion de variables de entorno (PATH).
   - Incidencia: Deprecacion de metodos en MoviePy 2.0.
     Solucion: Refactorizacion de codigo reemplazando .subclip() por .subclipped().

2. PRUEBAS UNITARIAS (SMOKE TESTS)
   - Modulo de Vision (DeepFace):
     Script: src/test_vision_day1.py
     Resultado: Descarga exitosa de pesos VGG-Face. Inferencia correcta en frame estatico (Confianza > 90%).
   - Modulo de Audio (Whisper):
     Script: src/test_audio_day1.py
     Resultado: Extraccion de audio exitosa y transcripcion correcta utilizando modelo 'base' en CPU.

3. INVESTIGACION DE MODELOS NLP
   - Se evaluaron opciones para Analisis de Sentimiento.
   - Seleccion: Modelo 'j-hartmann/emotion-english-distilroberta-base'.
   - Justificacion: Clasifica texto en las mismas 7 emociones universales (Ekman) que utiliza DeepFace, facilitando la integracion directa sin mapeos complejos.
   - Prueba: Script src/test_nlp_day1.py ejecutado exitosamente.

4. REUNION DE CIERRE Y DISEÑO
   - Se definio la Arquitectura de Datos (ver archivo DISENO_ARQUITECTURA.md).
   - Se establecio el formato JSON como interfaz de comunicacion entre modulos.
   - Planificacion Dia 2: Desarrollo de bucles de procesamiento completo para Video y Audio.

   ======================================================================
DIA 2: DESARROLLO PARALELO DE MODULOS
Fecha: 16/12/2025
ESTADO: EN PROCESO (Modulo Utilidades Completado)
======================================================================

1. IMPLEMENTACION DE INFRAESTRUCTURA COMUN (MODULO UTILIDADES)
   - Objetivo: Crear funciones transversales (Helpers) para estandarizar Logs, Rutas y Formatos de Salida, facilitando el trabajo de los equipos de Audio y Video.
   - Archivo base: src/utils.py
   - Funcionalidades implementadas:
     a) Sistema de Logging Centralizado (setup_logger): 
        - Configuración dual: Salida a consola (INFO) y persistencia en archivo .log (dentro de carpeta /logs).
        - Permite trazabilidad de errores durante ejecuciones largas.
     b) Gestión de Rutas y Archivos (get_video_path): 
        - Abstracción de rutas absolutas para evitar errores de "File not found" en diferentes entornos.
     c) Extracción de Metadatos (get_video_properties): 
        - Uso optimizado de OpenCV para leer FPS y conteo de frames sin decodificar todo el video.
     d) Estandarización de Salida (save_analysis_json): 
        - Función wrapper que recibe datos crudos y los envuelve en la estructura JSON definida en el Día 1 (metadata + data).
     e) Conversión Temporal (ms_to_timestamp):
        - Utilidad para convertir milisegundos a formato legible (MM:SS:mmm) para reportes humanos.

2. PRUEBAS DE INTEGRACION DE UTILIDADES
   - Script de prueba: test_utilities_module()
   - Resultados de validación:
     - Log generado correctamente en carpeta /logs con timestamp de ejecución.
     - Detección correcta de propiedades de video de prueba (video1.mp4).
     - Generación exitosa de JSON de prueba en /output/test_output_utils.json cumpliendo el esquema de diseño.
   - Conclusión: El módulo 'utils' es estable y está listo para ser importado por los módulos de Audio y Video.